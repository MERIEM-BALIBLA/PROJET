#include<stdio.h>
#include<stdlib.h>
#include<string.h>
int Ntache;
struct tache{
	int identifiant;
	char titre[100];
	char description[100];
	int deadline;
	char statut[100];
};
struct tache taches[100];
void Menu(){
    printf("\t\t\t\t\t\t*MESNU*\n");
    printf("choisir la fonction que vous voullez : \n");
    printf("1. Ajouter une nouvelle tâche\n");
    printf("2. Ajouter plusieurs nouvelles tâches\n");
    printf("3. Afficher la liste de toutes les tâches \n");                    
    printf("\t\t1.1. Trier les tâches par ordre alphabétique\n");            
    printf("\t\t1.2. Trier les tâches par deadline\n");                        
    printf("\t\t1.3. Afficher les tâches dont le deadline est dans 3 jours ou moins\n");               
    printf("4. Modifier une tâche\n");             
    printf("\t\t4.1. Modifier la description d'une tâche\n");
    printf("\t\t4.2. Modifier le statut d’une tâche\n");                       
    printf("\t\t4.3. Modifier le deadline d’une tâche\n");                    
    printf("5. Supprimer une tâche par identifiant\n");                       
    printf("6. Rechercher les Tâches\n");           
    printf("\t\t6.1. Rechercher une tâche par son Identifiant\n");             
    printf("\t\t6.2. Rechercher une tâche par son Titre\n");                   
    printf("7. Statistiques\n");   
    printf("\t\t7.1. Afficher le nombre total des tâches\n");                  
    printf("\t\t7.2. Afficher le nombre de tâches complètes et incomplètes\n"); 
    printf("\t\t7.3. Afficher le nombre de jours restants jusqu'au délai de chaque tâche");
    printf("\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t-----------------------------------------------------------------\n");
}

//ajouter plusieurs taches 
void ajouterTache(){
	int i;
	printf("donner le nombre des taches :");
	scanf("%d",&Ntache);
	for(i = 0;i < Ntache;i++){
		printf("donner le numero d'identifiant :");
		scanf("%d",&taches[i].identifiant);
		
		printf("entrer le titre de la tache :");
		scanf("%s",&taches[i].titre);
		
		printf("faite une petite description :");
		scanf("\t%[^\n]s",&taches[i].description);
		
		printf("saisir le deadline de la tache :");
		scanf("%d",&taches[i].deadline);
		printf("%d", taches[i].deadline);
		
		printf("donner la statut de la tache :");
		scanf("%s",&taches[i].statut);
	}
}
//affichage simple des taches
void affichage(){
	int i;
	for(i = 0;i < Ntache;i++)
		printf("%d\t%s\t%s\t%d\t%s\n",taches[i].identifiant,taches[i].titre,taches[i].description,taches[i].deadline,taches[i].statut);
}

void triTache(){
	int i,j;
	int re = 0;
	int cas;
  	printf("Tri selon :");
  	scanf("%d", &cas);
 	switch (cas){
    	case 1 : printf("3.1. Trier les tâches par ordre alphabétique :\n"); 
				 for(i = 0;i < Ntache;i++){
				 	for(j = i+1;j < Ntache;j++){
				 		if(strcmp(taches[i].titre,taches[j].titre) > 0){
            			char re[100];
            			strcpy(re,taches[i].titre);
            			strcpy(taches[i].titre,taches[j].titre);
            			strcpy(taches[j].titre,re);
   				 	}
					}
				 }
				 for(i = 0;i < Ntache;i++){
						printf("\t\t\t\t%d\t%s\t%s\t%d\t%s\n",taches[i].identifiant,taches[i].titre,taches[i].description,taches[i].deadline,taches[i].statut);
					}
		break;
    	case 2 : printf("3.2. Trier les tâches par deadline :\n");
				  
				 for(i = 0 ; i < Ntache ; i++ ){
        			for(j = i + 1 ; j < Ntache ;j++){
           				 if(taches[j].deadline<taches[i].deadline){ 
                			re = taches[j].deadline;
                			taches[j].deadline = taches[i].deadline;
                			taches[i].deadline = re ;
            				}
        				}
    				}
				 for(i = 0;i < Ntache;i++){
						printf("\t\t\t\t%d\t%s\t%s\t%d\t%s\n",taches[i].identifiant,taches[i].titre,taches[i].description,taches[i].deadline,taches[i].statut);
					}	
		break;
    	case 3 : printf("3.3. Afficher les tâches dont le deadline est dans 3 jours ou moins :\n"); break;}
    	
}

int main(){
	int fonction;
	do{
	Menu();
	printf("saisie la fonction :");
    scanf("%d", &fonction);
	switch (fonction) 
    {
      case 1 : printf("1. Ajouter une nouvelle tâche\n");break;
      case 2 : printf("2. Ajouter plusieurs nouvelles tâches");
			ajouterTache();
			affichage();
               break;
      case 3 : printf("3. Afficher la liste de toutes les tâches\n"); 
               triTache();
      break;
      case 4 : printf("4. Modifier une tâche :\n");

      break;
      case 5 : printf("5. Supprimer une tâche par identifiant"); break;
      case 6 : printf("6. Rechercher les Tâches"); 

      break;
      case 7 : printf("7. Statistiques");

      break;
      }

    } while(fonction != 0);
    
	ajouterTache();
	affichage();
	return 0;
}
